var Analytics=(function(self){self.params={};self.reset=function(){self.params={};};self.build=function(tracking_params,id){_.defaults(self.params,tracking_params);};self.prepare=function(type,framework){if(_.isEmpty(self.params))return{};var prepared_params=_.clone(self.params),analytics_framework_plugin=self[type][framework];prepared_params.cache_buster=self.Utils.cache_buster();_.defaults(prepared_params,analytics_framework_plugin.defaults);transform(analytics_framework_plugin.transformations,prepared_params);filter(analytics_framework_plugin.accepts,prepared_params);return prepared_params;};var filter=function(acceptable_keys,params){if(acceptable_keys!=="all"){_.each(params,function(value,key){if(!_.include(acceptable_keys,key)){delete params[key];}});}};var transform=function(transformations,params){_.each(transformations,function(transformed_keys,generic_key){var param_value=params[generic_key];if(!_.isUndefined(param_value)){var i,length;for(i=0,length=transformed_keys.length;i<length;i++){params[transformed_keys[i]]=param_value;}
delete params[generic_key]}});};return self;}({}));_.extend(Analytics,MicroEvent);var Analytics=(function(self){self.frameworks={clicks:['adtracker','omniture','atti'],impressions:['omniture']};var types=_.keys(self.frameworks);_.each(types,function(type){self[type]={emit:function(){self.emit(type,self.frameworks[type],arguments)}};});return self;}(Analytics));var Analytics=(function(self){var Utils=self.Utils={},expando_number=0;Utils.querify=function(url,params){var query="";for(query_string in params){query+=query_string+'='+params[query_string]+'&';}
return url+"?"+query.substring(0,query.length-1);};Utils.request_image=function(url){var pixel=new Image();pixel.src=url;};Utils.cache_buster=function(){return(new Date()).getTime()+'-'+expando_number++;}
return self;}(Analytics));