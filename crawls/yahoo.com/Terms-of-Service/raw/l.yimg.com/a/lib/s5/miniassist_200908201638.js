(function(){var d=YAHOO,c=d.util,b=c.Dom,a=c.Event;if(parseFloat(d.env.modules.yahoo.version)<2.4){return}d.namespace("Search");d.Search.Configurable=function(){};d.Search.Configurable.prototype={onConfigChange:new c.CustomEvent("configChange"),getConfigValue:function(e){return this._config.hasOwnProperty(e)?this._config[e]:undefined},setConfigValue:function(f,g){var e=this.getConfigValue(f);this._config[f]=g;this.onConfigChange.fire(f,e,g)}};d.Search.Assist=function(f,e){this.TRIGGER_DEL=1;this.TRIGGER_INS=0;this._config=e||{};d.lang.augmentObject(this._config,{autoSuggest:true,ksMaxDelay:3000,ksMinDelay:400,ksMinLength:null,ksMultiplier:4,ksSuggestDelay:200,smartSuggest:true,suppressBrowserComplete:true});this._inputEl=b.get(f);this._ksCount=0;this._ksFirstStroke=null;this._ksMode=null;this._ksTimeout=null;this._originalQuery=this._inputEl.value;this.onTriggerSuggest=new c.CustomEvent("triggerSuggest");this._init()};d.Search.Assist.prototype={buildSearchUrl:function(n,q,h){var f=this._inputEl.form,m=[],j=[],e=h?h:f.action,l,o,g,p;for(g in q){p=q[g];j.push(encodeURIComponent(g)+"="+encodeURIComponent(p))}n=n||this.getQuery();m=b.getElementsBy(function(i){switch(i.tagName.toLowerCase()){case"input":case"select":case"textarea":return true}return false},null,f);for(l=0;l<m.length;++l){o=m[l];if(o.tagName.toLowerCase()==="input"){switch(o.type){case"button":case"image":case"reset":case"submit":continue;case"checkbox":case"radio":if(!o.checked){continue}break}}g=o.name;p=g===this._inputEl.name?n:o.value;if(p&&!q[g]){j.push(encodeURIComponent(g)+"="+encodeURIComponent(p))}}return e+"?"+j.join("&")},encodeEntities:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML},getOriginalQuery:function(){return this._originalQuery},getQuery:function(){return this._inputEl.value},highlight:function(e,h){h=this.encodeEntities(d.lang.trim(h||this.getQuery()));e=this.encodeEntities(d.lang.trim(e));if(!h){return e}var f,g=h.replace(/["<>]/g,"").split(/\s+/).sort(function(j,i){return i.length-j.length});for(f=0;f<g.length;++f){e=e.replace(new RegExp('(^|\\s+|\\.|")('+this._escapeRegexp(g[f])+")(?!</strong>)","gi"),"$1<strong>$2</strong>")}return e},setQuery:function(e){this._resetKeys();this._inputEl.value=e},truncate:function(g,e,f){var h,j;g=d.lang.trim(g);if(!d.lang.isString(g)||g.length<=e||(f&&!d.lang.isString(f))){return g}f=f?f.split(/\s+/):[];for(h=0;h<f.length;++h){j=f[h];if(j.length>3){g=g.replace(new RegExp("(?:^|\\s+)"+j+"(?:\\s+)?","gi"),"...");if(g.length<=e){return g}}}return d.lang.trim(g.substr(0,e-3)).replace(/\.+$/,"")+"..."},_analyzeKeys:function(l){var i=this._config,h=null,k=l.keyCode,j=d.lang.trim(this.getQuery()),g,f;if(!i.autoSuggest||(k<46&&k!==8&&k!==32)){return}if(this._ksTimeout){clearTimeout(this._ksTimeout);this._ksTimeout=null}if(i.ksMinLength&&j.length<i.ksMinLength){return}this._ksMode=k===8||k===46?this.TRIGGER_DEL:this.TRIGGER_INS;if(i.smartSuggest){g=(new Date()).getTime();this._ksCount+=1;if(this._ksCount===1){this._ksFirstStroke=g;h=i.ksMaxDelay}else{h=Math.round((g-this._ksFirstStroke)/this._ksCount)*i.ksMultiplier}if(h>i.ksMaxDelay){h=i.ksMaxDelay}else{if(h<i.ksMinDelay){h=i.ksMinDelay}}}else{h=i.ksSuggestDelay}if(h!==null){f=this;this._ksTimeout=setTimeout(function(){f._triggerSuggest.call(f)},h)}},_configChange:function(g,f){switch(f[0]){case"autoSuggest":case"suppressBrowserComplete":this._initConfig();break}},_detachEvents:function(){a.removeListener(this._inputEl,"keyup",this._analyzeKeys);a.removeListener(this._inputEl,"focus",this._resetKeys)},_escapeRegexp:function(e){return e.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1")},_init:function(){this._initConfig();this.onConfigChange.subscribe(this._configChange,this,true)},_initConfig:function(){var e=this._inputEl;this._detachEvents();if(this._config.autoSuggest){a.on(e,"keyup",this._analyzeKeys,this,true);a.on(e,"focus",this._resetKeys,this,true)}if(this._config.suppressBrowserComplete){e.setAttribute("autocomplete","off")}else{e.removeAttribute("autocomplete")}},_resetKeys:function(){this._ksCount=0;this._ksFirstStroke=null;this._ksMode=null;if(this._ksTimeout){clearTimeout(this._ksTimeout);this._ksTimeout=null}},_triggerSuggest:function(){this.onTriggerSuggest.fire(this._inputEl,this.getQuery(),this._ksMode)}};d.lang.augment(d.Search.Assist,d.Search.Configurable);YAHOO.register("searchassist",YAHOO.Search.Assist,{version:"2.1.0",build:"0"})})();(function(){var g=document,f=YAHOO,e=f.util,a=e.Dom,b=0,c=1;if(parseFloat(f.env.modules.yahoo.version)<2.4){return}f.Search.Assist.Tray=function(i,h,d){this._config=d||{};f.lang.augmentObject(this._config,{animEnabled:false,animDuration:0.1,classOpen:"open",heightClosed:"0",heightOpen:"7.7em",iframeShimMode:1});this._animClose=null;this._animOpen=null;this._assist=i;this._panels={};this._pixelEl=null;this._trayEl=a.get(h);this._iframeShim=null;this.onAfterClose=new e.CustomEvent("afterClose");this.onAfterOpen=new e.CustomEvent("afterOpen");this.onBeforeClose=new e.CustomEvent("beforeClose");this.onBeforeOpen=new e.CustomEvent("beforeOpen");this._init()};f.Search.Assist.Tray.prototype={close:function(){if(this.getState()===b){return}this.onBeforeClose.fire();if(this._config.animEnabled){this.stopAnim();this._animClose.animate()}else{this._close()}},getState:function(){return a.hasClass(this._trayEl,this._config.classOpen)?c:b},isAnimated:function(){return this._config.animEnabled&&(this._animOpen.isAnimated()||this._animClose.isAnimated())},isClosed:function(){return this.getState()===b},isOpen:function(){return this.getState()===c},open:function(){if(this.getState()===c){return}this.onBeforeOpen.fire();if(this._config.animEnabled){this.stopAnim();this._animOpen.animate()}else{this._open()}},setState:function(d){if(d===b){this.close()}else{if(d===c){this.open()}}},stopAnim:function(){if(!this._config.animEnabled){return false}if(this._animClose.isAnimated()){this._animClose.stop(true);return true}else{if(this._animOpen.isAnimated()){this._animOpen.stop(true);return true}}return false},toggle:function(){if(this.getState()===b){this.open();return c}else{this.close();return b}},_configChange:function(h,d){switch(d[0]){case"animDuration":case"animEnabled":case"heightClosed":case"heightOpen":this._initAnim();break}},_getPixelHeight:function(h){if(h==0){return 0}var d,i,j;if(this._pixelEl){d=this._pixelEl;i=d.style}else{d=this._pixelEl=g.createElement("div");i=d.style;i.display="none";i.position="absolute";i.left="-9999px";this._trayEl.parentNode.appendChild(d)}i.height=h;i.display="block";j=d.offsetHeight;i.display="none";return j},_init:function(){this._initAnim();this._initIframeShim();this.onConfigChange.subscribe(this._configChange,this,true)},_initAnim:function(){var j=this._config,h=this,i,d;if(!j.animEnabled){return}if(!f.env.modules.animation){j.animEnabled=false;if(e.YUILoader){d=new e.YUILoader();d.require("animation");d.insert(function(){j.animEnabled=true;h._initAnim()})}}if(j.animEnabled){i=this._getPixelHeight(j.heightOpen);this._animClose=new e.Anim(this._trayEl,{height:{to:this._getPixelHeight(j.heightClosed)}},j.animDuration);this._animClose.onComplete.subscribe(this._close,this,true);this._animOpen=new e.Anim(this._trayEl,{height:{to:i}},j.animDuration);this._animOpen.onComplete.subscribe(this._open,this,true);yue.on(w,"resize",function(){var k=h._getPixelHeight(j.heightOpen);if(i!=k){h._animOpen.attributes.height.to=k;if(h.isOpen()){h._animOpen.animate()}i=k}})}},_initIframeShim:function(){var h=this._config,i,d;if(h.iframeShimMode===0||h.iframeShimMode===1&&(!f.env.ua.ie||f.env.ua.ie>=7)){return}i=g.createElement("iframe");if(window.location.href.toLowerCase().indexOf("https")===0){i.src="javascript:false;"}if(f.env.ua.ie){i.style.filter="alpha(opacity=0)";i.frameBorder=0}else{i.style.opacity="0"}i.style.position="absolute";i.style.border="none";i.style.margin="0";i.style.padding="0";i.style.display="none";i.tabIndex=-1;d=this._trayEl.parentNode||g.body;d.appendChild(i);this._iframeShim=i},syncIframeShim:function(){var d=this._iframeShim,h;if(d){d.style.width=this._trayEl.offsetWidth+"px";d.style.height=this._trayEl.offsetHeight+"px";h=a.getXY(this._trayEl);if(h===false){d.style.display="none"}else{a.setXY(d,[h[0],h[1]])}}},_stackIframeShim:function(){var d=this._iframeShim,h;if(d){h=a.getStyle(this._trayEl,"zIndex");if(!f.lang.isUndefined(h)&&!isNaN(h)){a.setStyle(d,"zIndex",(h-1))}}},_showIframeShim:function(){var d=this._iframeShim;if(d){d.style.display="block"}},_hideIframeShim:function(){var d=this._iframeShim;if(d){d.style.display="none"}},_open:function(){a.addClass(this._trayEl,this._config.classOpen);this._showIframeShim();this._stackIframeShim();this.syncIframeShim();this.onAfterOpen.fire()},_close:function(){a.removeClass(this._trayEl,this._config.classOpen);this._hideIframeShim();this.onAfterClose.fire()}};f.Search.Assist.Tray.STATE_CLOSED=b;f.Search.Assist.Tray.STATE_OPEN=c;f.lang.augment(f.Search.Assist.Tray,f.Search.Configurable);YAHOO.register("searchassist_tray",YAHOO.Search.Assist.Tray,{version:"2.1.0",build:"0"})})();(function(){var f=document,e=YAHOO,c=e.util,b=c.Dom,a=c.Event;if(parseFloat(e.env.modules.yahoo.version)<2.4){return}e.Search.Assist.TrayPanel=function(h,g,d){this.SCROLL_ARROW=0;this.SCROLL_BUTTON=2;this.SCROLL_WHEEL=1;this._config=d||{};e.lang.augmentObject(this._config,{animEnabled:false,animDuration:0.2,buttonDown:null,buttonLeft:null,buttonRight:null,buttonUp:null,classButtonDisabled:"disabled",classHidden:"hidden",panelBottom:null,panelLeft:null,panelRight:null,panelTop:null,scrollX:false,scrollY:false});this._animHide=null;this._animShow=null;this._assist=h._assist;this._panelEl=b.get(g);this._tray=h;this._hasFocus=false;this.onAfterHide=new c.CustomEvent("afterHide");this.onAfterShow=new c.CustomEvent("afterShow");this.onBeforeHide=new c.CustomEvent("beforeHide");this.onBeforeShow=new c.CustomEvent("beforeShow");this.onScrollDown=new c.CustomEvent("scrollDown");this.onScrollLeft=new c.CustomEvent("scrollLeft");this.onScrollRight=new c.CustomEvent("scrollRight");this.onScrollUp=new c.CustomEvent("scrollUp");this.onFocus=new c.CustomEvent("focus");this.onBlur=new c.CustomEvent("focus");this._init()};e.Search.Assist.TrayPanel.prototype={focus:function(){function d(i){switch(i.tagName.toLowerCase()){case"a":case"area":case"button":case"input":case"label":case"select":case"textarea":return true}return false}function h(k){var m=b.getChildren(k),n,l,j;for(l=0;l<m.length;++l){n=m[l];j=d(n)?n:h(n);if(j){return j}}return null}var g=h(this._panelEl);if(g&&g.focus){g.focus();return g}return null},hide:function(){if(!this.isVisible()){return}this.onBeforeHide.fire();if(this._config.animEnabled){this.stopAnim();this._animHide.animate()}else{this._hide()}},isVisible:function(){return this._tray.isOpen()&&!b.hasClass(this._panelEl,this._config.classHidden)},show:function(){if(this.isVisible()){return}this.onBeforeShow.fire();if(this._config.animEnabled){this.stopAnim();this._animShow.animate()}else{this._show()}},stopAnim:function(){if(!this._config.animEnabled){return false}if(this._animHide.isAnimated()){this._animHide.stop(true);return true}else{if(this._animShow.isAnimated()){this._animShow.stop(true);return true}}return false},_configChange:function(g,d){switch(d[0]){case"animEnabled":case"animDuration":case"buttonDown":case"buttonLeft":case"buttonRight":case"buttonUp":case"scrollX":case"scrollY":this._initConfig();break}},_detachEvents:function(){var g=this._config,j=["Down","Left","Right","Up"],h,d;this._tray.onBeforeClose.unsubscribe(this.hide,this);a.removeListener(this._panelEl,e.env.ua.gecko||e.env.ua.opera?"keypress":"keydown",this._keyDown);a.removeListener(this._panelEl,e.env.ua.gecko?"DOMMouseScroll":"mousewheel",this._mouseWheel);for(h=0;h<j.length;++h){d=j[h];if(g["button"+d]){a.removeListener(g["button"+d],"click",this._scrollButton)}}},_hide:function(){b.addClass(this._panelEl,this._config.classHidden);this.onAfterHide.fire()},_init:function(){this._initFocus();this._initConfig();this.onConfigChange.subscribe(this._configChange,this,true)},_initAnim:function(){var h=this._config;if(!h.animEnabled){return}if(!e.env.modules.animation){h.animEnabled=false;if(c.YUILoader){var d=new c.YUILoader(),g=this;d.require("animation");d.insert(function(){h.animEnabled=true;g._initAnim()})}}if(h.animEnabled){this._animHide=new c.Anim(this._panelEl,{opacity:{to:0}},h.animDuration,c.Easing.easeBoth);this._animHide.onComplete.subscribe(this._hide,this,true);this._animShow=new c.Anim(this._panelEl,{opacity:{to:1}},h.animDuration,c.Easing.easeBoth);this._animShow.onComplete.subscribe(this._show,this,true);this._animShow.onStart.subscribe(function(){b.setStyle(this._panelEl,"opacity",0);b.removeClass(this._panelEl,h.classHidden)},this,true)}},_initConfig:function(){var j=["Down","Left","Right","Up"],g=this._config,h,d;this._detachEvents();this._initAnim();this._tray.onBeforeClose.subscribe(this.hide,this,true);if(g.scrollX||g.scrollY){a.on(this._panelEl,e.env.ua.gecko||e.env.ua.opera?"keypress":"keydown",this._keyNav,this,true);for(h=0;h<j.length;++h){d=j[h];if(g["button"+d]){a.on(g["button"+d],"click",this._scrollButton,[this,d])}}if(g.scrollY){a.on(this._panelEl,e.env.ua.gecko?"DOMMouseScroll":"mousewheel",this._mouseWheel,this,true)}}},_initFocus:function(){var d=this;function h(){d._hasFocus=true;d.onFocus.fire()}function g(){d._hasFocus=false;d.onBlur.fire()}if(a.onFocus&&a.onBlur){a.onFocus(this._panelEl,h);a.onBlur(this._panelEl,g)}else{if(e.env.ua.ie){a.on(this._panelEl,"focusin",h,this,true);a.on(this._panelEl,"focusout",g,this,true)}else{this._panelEl.addEventListener("focus",h,true);this._panelEl.addEventListener("blur",g,true)}}},_keyNav:function(h){if(h.altKey||h.ctrlKey||h.metaKey||h.shiftKey){return}var g=this.SCROLL_ARROW,d=a.preventDefault;if(this._config.scrollX){switch(h.keyCode){case 37:case 63234:d(h);this.onScrollLeft.fire(g);return;case 39:case 63235:d(h);this.onScrollRight.fire(g);return}}if(this._config.scrollY){switch(h.keyCode){case 38:case 63232:d(h);this.onScrollUp.fire(g);return;case 40:case 63233:d(h);this.onScrollDown.fire(g);return}}},_mouseWheel:function(d){var g;if(d.wheelDelta){g=d.wheelDelta/120}else{if(d.detail){g=-d.detail/3}else{return}}a.preventDefault(d);if(g>0){this.onScrollUp.fire(this.SCROLL_WHEEL)}else{this.onScrollDown.fire(this.SCROLL_WHEEL)}},_scrollButton:function(h,g){var d=g[0];if(h.button===0){a.preventDefault(h);d["onScroll"+g[1]].fire(d.SCROLL_BUTTON)}},_show:function(){if(!this._config.animEnabled){b.removeClass(this._panelEl,this._config.classHidden)}this.onAfterShow.fire()}};e.lang.augment(e.Search.Assist.TrayPanel,e.Search.Configurable);YAHOO.register("searchassist_traypanel",YAHOO.Search.Assist.TrayPanel,{version:"2.1.0",build:"0"})})();(function(){var h=document,g=YAHOO,c=g.util,b=c.Dom,a=c.Event;if(parseFloat(g.env.modules.yahoo.version)<2.4){return}function f(j,i,l,d,k){d=d||{};g.lang.augmentObject(d,{classItemHidden:"hidden",classItemSpAYT:"spayt",linkStems:[],linkParams:{},linkTitle:"Search for #{q}",maxLength:38,scrollSize:5,scrollX:true,scrollY:true,timeout:5000,url:"http://sugg.search.yahoo.com/gossip-us-sayt/?output=yjsonp&nresults=5&l=1&command=#{q}",pubid:null});f.superclass.constructor.call(this,j,i,d);this._inputEl=this._assist._inputEl;this._cache={};this._data={};this._lastQuery=null;this._list=b.get(l);this._scrollIndex=0;this._scrollTotal=0;this._selIndex=null;this._tId=null;this._gprid=null;this.onGossipClick=new c.CustomEvent("gossipClick");this.onRefresh=new c.CustomEvent("refresh");this.onRequest=new c.CustomEvent("request");this.onResponse=new c.CustomEvent("response");this._initGossip(k)}g.lang.extend(f,YAHOO.Search.Assist.TrayPanel);var e=f.prototype;e.cancel=function(){if(thisobj._tId){window.fxsearch=window.yasearch=function(){};c.Get.abort(thisobj._tId);thisobj._tId=null}};e.clear=function(){this._list.innerHTML="";this.scrollReset()};e.focus=function(){var d=b.getChildren(this._list),i;if(this.isVisible()&&this.hasGossip()){i=d[this._selIndex];try{i.firstChild.focus()}catch(j){}}};e.getSelectedIndex=function(){return this._selIndex};e.hasGossip=function(){return this.length()>0};e.length=function(){return this._data.g?this._data.g.length:0};e.refresh=function(l){if(l){this._data=this._parseResponse(l)}var n=this._assist,j=this._config,o=this._data.g,m,t,s,d,r,q,p,k;this.clear();if(!o||!o.length){s=n.getQuery();d="<strong>"+n.truncate(n.encodeEntities(s),j.maxLength)+"</strong>";r=j.linkStems.length>0?j.linkStems[0]:null;this._addItem(s,d,n.buildSearchUrl(s,j.linkParams,r))}else{for(m=0;m<o.length;++m){t=o[m];q="";if(m>=j.scrollSize){q+=j.classItemHidden}if(t[3]==1){q+=" "+j.classItemSpAYT;k=true}this._addItem(t[0],t[1],t[2],q)}}p=b.getChildren(this._list);p[0].firstChild.tabIndex=0;this.scrollReset();this.onRefresh.fire(k)};e.request=function(k){var i=this._cache,k=k||this._assist.getQuery(),d=this,j=this._config.url;j=j.replace("#{q}",encodeURIComponent(k));if(this._config.pubid){if(j.match(/(\?|&)pubid=[^&]*/)){j=j.replace(/(\?|&)pubid=[^&]*/,"$1pubid="+this._config.pubid)}else{j+="&pubid="+this._config.pubid}}if(!k||k.length>255){this.clear();return false}if(i[j]){this._data=i[j];this.onResponse.fire(k,j,i[j]);return true}if(d._tId){c.Get.abort(d._tId);d._tId=null}window.fxsearch=window.yasearch=function(l){var m=d._parseResponse(l);d._cache[j]=m;if(m.q===d._lastQuery){d._data=m;d.onResponse.fire(k,j,m)}};d._tId=c.Get.script(j,{scope:this,onSuccess:function(l){l.purge();if(l.tId===this._tId){this._tId=null}},onFailure:function(l){l.purge();if(l.tId===this._tId){this._tId=null}},timeout:this._config.timeout}).tId;this._lastQuery=k;this.onRequest.fire(k,j);return true};e.scrollDown=function(){var j=this._config,i=b.getChildren(this._list),d=this._scrollIndex+j.scrollSize;if(d>this._scrollTotal-1){return}if(j.buttonDown&&d>=this._scrollTotal-1){b.addClass(j.buttonDown,j.classButtonDisabled)}if(j.buttonUp){b.removeClass(j.buttonUp,j.classButtonDisabled)}b.addClass(i[this._scrollIndex],j.classItemHidden);b.removeClass(i[d],j.classItemHidden);this._scrollIndex+=1};e.scrollReset=function(){var j=this._config,d=b.getChildren(this._list),k;this._scrollIndex=0;this._scrollTotal=d.length||0;for(k=0;k<this._scrollTotal;++k){if(k<j.scrollSize){b.removeClass(d[k],j.classItemHidden)}else{b.addClass(d[k],j.classItemHidden)}}if(j.buttonUp){b.addClass(j.buttonUp,j.classButtonDisabled)}if(j.buttonDown){if(this._scrollTotal>j.scrollSize){b.removeClass(j.buttonDown,j.classButtonDisabled)}else{b.addClass(j.buttonDown,j.classButtonDisabled)}}};e.scrollUp=function(){var i=this._config,j=this._scrollIndex-1,d=b.getChildren(this._list);if(j<0){return}if(j===0&&i.buttonUp){b.addClass(i.buttonUp,i.classButtonDisabled)}if(i.buttonDown&&j+i.scrollSize<this._scrollTotal){b.removeClass(i.buttonDown,i.classButtonDisabled)}b.addClass(d[j+i.scrollSize],i.classItemHidden);b.removeClass(d[j],i.classItemHidden);this._scrollIndex-=1};e.setSelectedIndex=function(j){if(j&&(j<0||j>=this._scrollTotal)){return false}var i=this._config,d=b.getChildren(this._list),k;if(this._selIndex!==null){k=d[this._selIndex];k.firstChild.tabIndex=-1}this._selIndex=j;if(this._selIndex===null){return false}k=d[this._selIndex];k.firstChild.tabIndex=0;if(this._selIndex<this._scrollIndex){while(this._selIndex<this._scrollIndex){this.scrollUp()}}else{while(this._selIndex>=this._scrollIndex+i.scrollSize){this.scrollDown()}}if(this._hasFocus){try{k.firstChild.focus()}catch(l){}}return true};e._addItem=function(m,k,j,l){var i=h.createElement("a"),d=h.createElement("li");i.href=j;i.innerHTML=k;i.tabIndex=-1;if(this._config.linkTitle){i.title=this._config.linkTitle.replace("#{q}",m)}i.setAttribute("gossipText",m);d.className=l?l:"";d.appendChild(i);return this._list.appendChild(d)};e._initGossip=function(d){if(d){this.refresh(d)}this.onResponse.subscribe(function(){this.refresh()},this,true);a.on(this._list,"click",this._listClick,this,true);this.onScrollDown.subscribe(this._scrollDown,this,true);this.onScrollUp.subscribe(this._scrollUp,this,true)};e._listClick=function(j){var i,d;if(j.ctrlKey||j.metaKey||j.shiftKey){return}i=a.getTarget(j);if(!i||this.onGossipClick.subscribers.length===0){return}if(i.tagName.toLowerCase()!=="a"){if(!(i=b.getAncestorByTagName(i,"a"))){return}}a.preventDefault(j);d=b.hasClass(i.parentNode,this._config.classItemSpAYT);this.onGossipClick.fire(i,i.getAttribute("gossipText"),i.href,this._gprid,d)};e._parseResponse=function(k){var o=this._assist,j=this._config,m,u=1,n,p,r,l,t,s,d,q;this._gprid=k.i;if(k.q&&k.r){r=k.q;l=k.r;u=2}else{r=k[0];l=k[1]}m={g:[],q:r};for(n=0,p=l.length;n<p;++n){if(u===2){t=l[n][0];s=l[n][1]}else{t=l[n];s=0}d=o.highlight(o.truncate(t,j.maxLength,r),r);if(s==1){d+="?"}q=j.linkStems.length>n?j.linkStems[n]:null;m.g.push([t,d,o.buildSearchUrl(t,j.linkParams,q),s])}return m};e._scrollDown=function(i,d){switch(d[0]){case this.SCROLL_ARROW:this.setSelectedIndex(this._selIndex!==null?this._selIndex+1:1);break;case this.SCROLL_BUTTON:case this.SCROLL_WHEEL:this.scrollDown();break}};e._scrollUp=function(i,d){switch(d[0]){case this.SCROLL_ARROW:if(this._selIndex===0){try{this._inputEl.focus()}catch(i){}}else{this.setSelectedIndex(this._selIndex!==null?this._selIndex-1:0)}break;case this.SCROLL_BUTTON:case this.SCROLL_WHEEL:this.scrollUp();break}};g.Search.Assist.Gossip=f;YAHOO.register("searchassist_gossip",YAHOO.Search.Assist.Gossip,{version:"2.1.0",build:"0"})})();(function(){var a=YAHOO.lang,d=YAHOO.namespace("Search");if(d.ULT){return}function b(j){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",f="",r,p,n,q,o,m,k,g=j.length,h=0;do{r=j.charCodeAt(h++);p=j.charCodeAt(h++);n=j.charCodeAt(h++);q=r>>2;o=((r&3)<<4)|(p>>4);m=((p&15)<<2)|(n>>6);k=n&63;if(isNaN(p)){m=k=64}else{if(isNaN(n)){k=64}}f+=(e.charAt(q)+e.charAt(o)+e.charAt(m)+e.charAt(k))}while(h<g);return f}function c(g){var f,e;for(f=0,e=g.length;f<e;f++){if(g.charCodeAt(f)<32){return true}}return false}d.ULT={SRC_SPACEID_KEY:"_S",beacon_click:function(h,g){var f=d.ULT.track_click(h,g)+"?t="+Math.random(),e=new Image();e.src=f},track_click:function(f,n){var h="\x03",g="\x04",e="_r",q,o,r=[],p=[],m,j,k;if(!a.isObject(n)){return f}n[e]=2;m=0;for(q in n){if(a.hasOwnProperty(n,q)){o=n[q];if(a.isUndefined(o)){o=n[q]=""}if(q.length<1||q.length>8||q.indexOf(" ")!==-1||c(q)||c(o)){return f}r[m++]=q}}r=r.sort();for(m=0,j=r.length;m<j;m++){q=r[m];o=n[q];p[m]=q+h+o}k=p.join(g);if(k.length<1||k.length>1024){return f}k=";_ylc="+b(k);m=f.indexOf("/*");if(m===-1){m=f.indexOf("/?")}if(m===-1){m=f.indexOf("?")}if(m===-1){return f+k}else{return f.substr(0,m)+k+f.substr(m)}}}}());(function(){var g=YAHOO,d=g.namespace("Search"),f=g.util,c=f.Dom,a=f.Event,e=0;if(parseFloat(g.env.modules.yahoo.version)<2.4){return}function b(j,h,i){if(!c.inDocument(j)||!c.inDocument(h)){return}this._config=i||{};g.lang.augmentObject(this._config,{spaceid:null,TRAY_CLASSNAME:"miniassist",GOSSIP_CLASSNAME:"gossip",ARIA_LIVE_REGION_CLASSNAME:"aria-live-region",aria_available_suggestions:"Search suggestions are available, use the up and down arrow keys to review them.",aria_no_available_suggestions:"No suggestion is available."});this._inputEl=c.get(j);this._trayEl=c.get(h);this._gossipEl=null;this._ariaLiveRegion=null;this._init()}b.prototype={assist:null,gossip:null,tray:null,_createGossipListElement:function(){var h=document.createElement("ul");h.className=this._config.GOSSIP_CLASSNAME;this._trayEl.appendChild(h);return h},_createAriaLiveRegion:function(){var h=this._ariaLiveRegion=document.createElement("div");h.setAttribute("role","status");h.setAttribute("aria-live","polite");h.className=this._config.ARIA_LIVE_REGION_CLASSNAME;this._trayEl.appendChild(h);return h},_initDomElements:function(){if(!c.hasClass(this._trayEl,this._config.TRAY_CLASSNAME)){c.addClass(this._trayEl,this._config.TRAY_CLASSNAME)}this._gossipEl=c.getElementsByClassName(this._config.GOSSIP_CLASSNAME,"ul",this._trayEl)[0]||this._createGossipListElement();this._ariaLiveRegion=c.getElementsByClassName(this._config.ARIA_LIVE_REGION_CLASSNAME,"div",this._trayEl)[0]||this._createAriaLiveRegion()},_createComponents:function(){this.assist=new d.Assist(this._inputEl,{ksSuggestDelay:0,smartSuggest:false});this.tray=new d.Assist.Tray(this.assist,this._trayEl);this.gossip=new d.Assist.Gossip(this.tray,this._trayEl,this._gossipEl);this.gossip.setConfigValue("url","http://gossip-ss.us.search.yahoo.com/gossip-us_ss/?output=yjsonp&nresults=5&l=1&command=#{q}")},_attachEvents:function(){this.tray.onBeforeOpen.subscribe(this._handleBeforeTrayOpen,this,true);this.tray.onAfterOpen.subscribe(this._handleAfterTrayOpen,this,true);this.tray.onBeforeClose.subscribe(this._handleBeforeTrayClose,this,true);this.assist.onTriggerSuggest.subscribe(this._handleGossipRequest,this,true);this.gossip.onGossipClick.subscribe(this._handleGossipClick,this,true);this.gossip.onRefresh.subscribe(this._handleGossipRefresh,this,true);a.on(this._inputEl,g.env.ua.gecko||g.env.ua.opera?"keypress":"keydown",this._handleInputKeyNav,this,true);a.on(this._trayEl,g.env.ua.gecko||g.env.ua.opera?"keypress":"keydown",this._handleTrayKeyNav,this,true);a.on(document,"mousedown",this._handleMouseDown,this,true);a.on(this._inputEl.form,"submit",this._handleSearchFormSubmit,this,true)},_init:function(){this._initDomElements();this._createComponents();this._attachEvents()},_updateAriaLiveRegion:function(i){var h=this._ariaLiveRegion,j;while(h.firstChild){h.removeChild(h.firstChild)}j=document.createElement("p");j.innerHTML=i;h.appendChild(j)},_handleBeforeTrayOpen:function(h){this.gossip.show()},_handleAfterTrayOpen:function(h){this.gossip.setSelectedIndex(0)},_handleBeforeTrayClose:function(h){this.gossip.setSelectedIndex(null)},_handleInputKeyNav:function(h){if(h.altKey||h.ctrlKey||h.metaKey||h.shiftKey){return}switch(h.keyCode){case 27:if(this.tray.isOpen()){this.tray.close()}break;case 40:case 63233:if(this.tray.isOpen()){if(this.gossip.hasGossip()){this.gossip.setSelectedIndex(0);this.gossip.focus()}}else{if(this.gossip.hasGossip()&&g.lang.trim(this._inputEl.value).length>0){this.tray.open()}}break;default:return}a.preventDefault(h)},_handleTrayKeyNav:function(h){if(h.altKey||h.ctrlKey||h.metaKey||h.shiftKey){return}if(h.keyCode===27){this.gossip.setSelectedIndex(null);this._inputEl.focus()}},_handleMouseDown:function(i){var h;if(this.tray.getState()===d.Assist.Tray.STATE_OPEN){h=a.getTarget(i);if(h!=this._inputEl&&!c.isAncestor(this._trayEl,h)){this.tray.close()}}},_handleGossipRequest:function(i,h){if(h[1].length>0){this.gossip.request(h[1])}else{if(h[1].length===0&&this.tray.isOpen()){this.tray.close()}}},_handleGossipClick:function(m,k){var n=k[1],j=k[2],h=k[3],i=k[4],l;if(this._config.spaceid){l={fr2:"sa-gp",query:encodeURIComponent(n),pqstr:encodeURIComponent(this.assist.getQuery()),gprid:h,sac:i?2:1,sao:e,n_gps:this.gossip.length()};l[d.ULT.SRC_SPACEID_KEY]=this._config.spaceid;j=d.ULT.track_click(j,l)}window.location=j},_handleGossipRefresh:function(k,h){var j=h[0],i;if(j){e=3}else{if(e===2||e===3){e=2}else{e=1}}if(this.gossip.hasGossip()){i=this._config.aria_available_suggestions;this.tray.open()}else{i=this._config.aria_no_available_suggestions}this._updateAriaLiveRegion(i);this.tray.syncIframeShim()},_handleSearchFormSubmit:function(j){var i,h=this._inputEl.form;if(this._config.spaceid){i={fr2:"sbtn",query:encodeURIComponent(this._inputEl.value),n_gps:this.gossip.length()};i[d.ULT.SRC_SPACEID_KEY]=this._config.spaceid;h.action=d.ULT.track_click(h.action,i)}}};g.lang.augment(b,d.Configurable);d.MiniAssist=b;YAHOO.register("miniassist",d.MiniAssist,{version:"2.1.0",build:"0"})}());